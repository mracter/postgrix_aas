language: elixir
elixir:
  - 1.6.6
otp_release:
  - 20.2
before_install:
dist: trusty
cache: apt
env:
  global:
    - PGVERSION=9.6
  matrix:
    - MIX_ENV=test
install:
  - mix local.rebar --force
  - mix local.hex --force
  - mix deps.get
before_script:
  - mix compile
  - psql -c "CREATE DATABASE testpostgres;" -U postgres
  - psql -c "ALTER USER postgres WITH PASSWORD 'mysecretpassword';" -U postgres
script:
  - mix test
  - mix ecto.create
after_script:
  - mix deps.get --only docs
  - MIX_ENV=docs mix inch.report
notifications:
  recipients:
    - paracetamolboy@gmail.com